{
  "version": 3,
  "sources": ["../../js/components/Portal.tsx"],
  "sourcesContent": ["import { destroyNode } from \"~/jsx\";\nimport { watch } from \"~/signals\";\n\ntype PortalProps = {\n  to?: Element | string,\n  $ref?: Element,\n};\n\nexport default function Portal(props: PortalProps, slots: JSX.Slots) {\n  const parent = () => {\n    if (!props.to) {\n      props.$ref = document.body;\n    }\n    else if (props.to instanceof Element) {\n      props.$ref = props.to;\n    }\n    else {\n      props.$ref = document.querySelector(props.to) || document.body;\n    }\n\n    return props.$ref;\n  };\n\n  const anchor = document.createComment(\"\");\n\n  const children = slots.default?.();\n  queueMicrotask(() => {\n    anchor.addEventListener(\"destroy\", () => {\n      children.forEach(destroyNode);\n      anchor.remove();\n    });\n  });\n\n  watch(() => {\n    parent().append(...children);\n  });\n\n  return anchor as unknown as JSX.Element;\n}\n"],
  "mappings": "AAAA,SAAS,mBAAmB;AAC5B,SAAS,aAAa;AAOP,SAAR,OAAwB,OAAoB,OAAkB;AACnE,QAAM,SAAS,MAAM;AACnB,QAAI,CAAC,MAAM,IAAI;AACb,YAAM,OAAO,SAAS;AAAA,IACxB,WACS,MAAM,cAAc,SAAS;AACpC,YAAM,OAAO,MAAM;AAAA,IACrB,OACK;AACH,YAAM,OAAO,SAAS,cAAc,MAAM,EAAE,KAAK,SAAS;AAAA,IAC5D;AAEA,WAAO,MAAM;AAAA,EACf;AAEA,QAAM,SAAS,SAAS,cAAc,EAAE;AAExC,QAAM,WAAW,MAAM,UAAU;AACjC,iBAAe,MAAM;AACnB,WAAO,iBAAiB,WAAW,MAAM;AACvC,eAAS,QAAQ,WAAW;AAC5B,aAAO,OAAO;AAAA,IAChB,CAAC;AAAA,EACH,CAAC;AAED,QAAM,MAAM;AACV,WAAO,EAAE,OAAO,GAAG,QAAQ;AAAA,EAC7B,CAAC;AAED,SAAO;AACT;",
  "names": []
}
