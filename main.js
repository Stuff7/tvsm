(()=>{var je=[];function X(e){let t=s=>{_e(n),je.push(n);try{e(s)}finally{je.pop()}},n={execute:t,dependencies:new Set};return t(void 0),n}function Ce(e,t){let n=o=>{_e(s),e.forEach(x=>{ft(s,x.listeners)});try{t(o)}finally{je.pop()}},s={execute:n,dependencies:new Set};return n(void 0),s}function Q(e,t){let n=o=>{_e(s),je.push(s);try{e()}finally{je.pop()}try{t(o)}finally{je.pop()}},s={execute:n,dependencies:new Set};return n(void 0),s}function j(e=void 0){let t=new Set,n=e,s=()=>{let x=je[je.length-1];return x&&ft(x,t),n},o=x=>{let m=n;n=x;for(let a of[...t])a.execute(m)};return[Object.assign(s,{listeners:t}),Object.assign(o,{byRef:x=>{x(n),o(n)},byRefAsync:async x=>{await x(n),o(n)}})]}function Z(e){let t=e;Object.defineProperty(t,"listeners",{value:new Set,enumerable:!1,configurable:!0});for(let n in t){let s=t[n];Object.defineProperty(t,n,{get:()=>{let o=je[je.length-1];return o&&ft(o,t.listeners),s},set:o=>{let x=s;s=o;for(let m of[...t.listeners])m.execute(x)}})}return t}function Be(e){return"listeners"in e&&e.listeners instanceof Set}function ft(e,t){t.add(e),e.dependencies.add(t)}function _e(e){for(let t of e.dependencies)t.delete(e);e.dependencies.clear()}function gt(e,t){e[t]=e[e.length-1],e.length--}function $t(e,t){if(e.nodeType===e.ELEMENT_NODE)for(let n of e.getElementsByTagName("*"))t(n);t(e)}function _t(e,t){t(e);for(let n of e.childNodes)_t(n,t);e.remove()}function Yt(e){let t={parent:null,prevSibling:null,nextSibling:null,setFromElement(n){this.parent=n.parentElement,this.prevSibling=n.previousSibling,this.nextSibling=n.nextSibling},isPositioned(){return!!(this.parent||this.prevSibling||this.nextSibling)},getInsertFunction(){if(this.prevSibling&&this.prevSibling.parentElement)return this.prevSibling.after.bind(this.prevSibling);if(this.nextSibling&&this.nextSibling.parentElement)return this.nextSibling.before.bind(this.nextSibling);if(this.parent)return this.nextSibling?this.parent.prepend.bind(this.parent):this.parent.append.bind(this.parent);throw new Error("Could not find element position")},insertNode(...n){try{return this.getInsertFunction()(...n),!0}catch{return!1}}};return e&&queueMicrotask(()=>t.setFromElement(e)),t}function $(e){let t=()=>{let s=document.createElement("template");return s.innerHTML=e,s.content.firstChild},n;return()=>(n||(n=t())).cloneNode(!0)}function se(e){let t=[];return(e==="resize"||e==="hashchange"?window:document).addEventListener(e,n=>{for(let s=t.length-1;s>=0;s--){let o=t[s];o.target.isConnected&&(o.fn(n),o.once&&gt(t,s))}}),t}function Ne(e){_t(e,t=>t.dispatchEvent(new CustomEvent("destroy")))}function be(e,t,n){queueMicrotask(()=>{t.parentNode&&(e.observe(t.parentNode,{childList:!0,subtree:!0}),n&&t.dispatchEvent(new CustomEvent("mount")))})}function Te(){return new MutationObserver(e=>{e.forEach(t=>{if(t.type==="childList"){for(let n of t.addedNodes)queueMicrotask(()=>{$t(n,s=>s.dispatchEvent(new CustomEvent("mount")))});for(let n of t.removedNodes)queueMicrotask(()=>{$t(n,s=>s.dispatchEvent(new CustomEvent("unmount")))})}})})}function oe(e,t,n){let s=!1;n instanceof Array?n[0]&&(e.push({fn:n[0],once:n[1].once,target:t}),s=!0):n&&(e.push({fn:n,target:t}),s=!0),s&&t.addEventListener("destroy",()=>{let o=e.findIndex(x=>x.target===t);o!==-1&&gt(e,o)})}function h(e,t,n){n instanceof Array?e.addEventListener(t,n[0],n[1]):e.addEventListener(t,n)}function ht(e,t){e instanceof Array?e.forEach(t):t(e)}function re(e,t,n){let s;e.addEventListener("destroy",()=>{s?ht(s,Ne):_e(x)});let o=()=>(s=t(),ht(s,m=>{m.addEventListener("destroy",()=>{_e(x),e.remove()})}),s),x=Q(n,()=>{if(n()){let m=s||(s=o());m instanceof Array?e.replaceWith(...m):e.replaceWith(m)}else s&&ht(s,m=>m.replaceWith(e))});return n()?s||(s=o()):e}function le(e,t,n){n==null||n===!1?e.removeAttribute(t):e.setAttribute(t,n)}function N(e,t,n){let s;t==="value"||t==="checked"?s=X(()=>{e[t]=n()}):s=X(()=>{le(e,t,n())}),e.addEventListener("destroy",()=>_e(s))}function F(e,t,n){let s=X(()=>{n()?e.classList.add(t):e.classList.remove(t)});e.addEventListener("destroy",()=>_e(s))}function ce(e,t,n){if(typeof n=="function"){let s=X(()=>e.style.setProperty(t,n()));e.addEventListener("destroy",()=>_e(s))}else e.style.setProperty(t,n.toString())}function l(e,t){if(e instanceof HTMLSlotElement&&!t)return e.replaceWith(...e.childNodes),e.children;if(typeof t=="string"||typeof t=="number"){let n=document.createTextNode("");return n.textContent=t.toString(),e.replaceWith(n),n}else{if(t instanceof Node)return e.replaceWith(t),t;if(t instanceof Array){let n=e,s=e;for(let o=0;o<t.length;o++)o+1<t.length&&(n=document.createComment(""),s.after(n)),l(s,t[o]),s=n;return t}else{let n=document.createTextNode("");e.replaceWith(n);let s=X(()=>{let o=t();typeof o=="string"?n.textContent=o:o!=null?n.textContent=o.toString():o==null&&(n.textContent="")});return n.addEventListener("destroy",()=>_e(s)),n}}}function Ee(e,t,n,s="jsx"){let o;e.addEventListener("destroy",()=>{o?Ne(o):_e(w)});let x=()=>`${s}-enter-active`,m=()=>`${s}-enter-from`,a=()=>`${s}-enter-to`,u=()=>`${s}-leave-active`,_=()=>`${s}-leave-from`,r=()=>`${s}-leave-to`;function i(){return new Promise(b=>{requestAnimationFrame(()=>requestAnimationFrame(b))})}let c=()=>(o=t(),o.addEventListener("destroy",()=>{_e(w),e.remove()}),o.addEventListener("transitionend",()=>{A(),n()||o.replaceWith(e)}),o),p=()=>o||(o=c()),f=!0,w=Q(n,async()=>{if(f&&!n()){f=!1;return}if(f=!1,p().classList.length&&(!n()&&(p().classList.contains(m())||p().classList.contains(x())||p().classList.contains(a()))?(await i(),A(),p().replaceWith(e)):n()&&(p().classList.contains(_())||p().classList.contains(r())||p().classList.contains(u()))&&(await i(),A(),p().replaceWith(e))),n()){if(p().isConnected)return;p().classList.add(m()),p().classList.add(x()),e.replaceWith(p()),await i(),p().classList.remove(m()),p().classList.add(a())}else p().isConnected&&(p().classList.add(_()),p().classList.add(u()),await i(),p().classList.remove(_()),p().classList.add(r()))});function A(){p().classList.remove(x()),p().classList.remove(m()),p().classList.remove(a()),p().classList.remove(u()),p().classList.remove(_()),p().classList.remove(r())}return n()?p():e}function de(e){return e.each.map((t,n)=>{let[s,o]=j(e.each[n]),x=s();return x&&typeof x=="object"&&!Be(x)&&Z(x),X(()=>{let m=e.each[n];s()!==m&&o(m)}),e.do(s,n)})}function me(e){let t=Yt(),n=document.createComment("For"),s=[],o=e.each.map(m),x=e.each.length;queueMicrotask(()=>{!n.isConnected&&!n.parentElement&&console.warn("<For> failed to mount"),t.setFromElement(n),n.remove(),o.forEach((u,_)=>{let r=o[_-1],i;return r?.isConnected?i=r.after.bind(r):i=t.getInsertFunction(),i(u)})});function m(u,_){let[r,i]=j(u),c=r();c&&typeof c=="object"&&(Be(c)?c.listeners.clear():Z(c));let p=!1;return X(()=>{if(p)return;let f=e.each[_];f&&typeof f=="object"&&!Be(f)&&Z(f),r()!==f&&(s[_]=f,f===void 0?(p=!0,a()):i(f))}),s.push(r()),e.do(r,_)}function a(){if(e.each.length<x){if(s[x-1]!==void 0)return;for(let u=x-1;u>=e.each.length;u--)Ne(o[u]);x=s.length=o.length=e.each.length}}return X(()=>{if(e.each.length>x){for(let u=x;u<e.each.length;u++){let _=o[u-1],r;_?.isConnected?r=_.after.bind(_):r=t.getInsertFunction();let i=m(e.each[u],u);r(i),o.push(i)}x=s.length=o.length=e.each.length}else e.each.length<x&&a()}),n}var Ao=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Cn=new DOMParser;function pt(e){return Cn.parseFromString(e,"text/html").body.textContent||""}function ke(e,t){return e>=t.length?e-t.length:e<0?t.length+e:e}function Ae(e){return new Promise(t=>{requestAnimationFrame(async()=>{t(await e())})})}function Ht(e=300){return new Promise(t=>setTimeout(t,e))}function zt(e,t=0){let n=-1;return Object.assign((...s)=>{clearTimeout(n),n=window.setTimeout(()=>e(...s),t)},{runNow(...s){clearTimeout(n),e(...s)}})}function Gt(e,t,n=!1){if(e===t)return 0;if(e==null)return 1;if(t==null)return-1;let s=e<t?-1:1;return n?-s:s}function Ke(e,t){return e===t||t.contains(e)}function Xe(){let e=document.activeElement;return e?e instanceof HTMLInputElement?Tn(e.type):!!(e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||e instanceof HTMLElement&&e.isContentEditable):!1}function Tn(e){switch(e){case"button":case"checkbox":case"color":case"file":case"hidden":case"image":case"radio":case"range":case"reset":case"submit":return!1;default:return!0}}function Re(e){return window.TouchEvent&&e instanceof TouchEvent?e.touches[0]:e}function jt(e,...t){let n=e;for(let s=0;s<t.length;s++)if(n=n[t[s]],n==null)return n;return n}var En=new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"2-digit"}),Qe="N/A";function Le(e){return e?En.format(e):Qe}var kn=new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"});function bt(e){return e?kn.format(e):Qe}function Ze(e,t,n){return!e||+t==+n||e>=t&&e<=n}function vt(e,t,n){return e>=t&&e<=n}function et(e){return e||Qe}function We(e,t){return e.toString().padStart(t,"0")}function Ye(e){return e?`S${We(e.season,2)}E${We(e.number,2)}`:Qe}function St(e,t,n="",s=[]){let o=Object.keys(e),x=Object.keys(t),m=new Set([...o,...x]);for(let a of m){let u=n?`${n}.${a}`:a;e[a]instanceof Date&&t[a]instanceof Date?e[a].getTime()!==t[a].getTime()&&s.push(u):e[a]!=null&&typeof e[a]=="object"&&t[a]!=null&&typeof t[a]=="object"?St(e[a],t[a],u,s):e[a]!==t[a]&&s.push(u)}return{a:e,b:t,paths:s}}var Ue=()=>fe.url&&`${fe.url}/rest/v1`,qe=()=>({apikey:fe.key,"Content-Type":"application/json"}),Bt="TVSM__supabaseKey",Wt="TVSM__supabaseUrl",fe=Z({key:localStorage.getItem(Bt)||"",url:localStorage.getItem(Wt)||""});X(()=>{localStorage.setItem(Bt,fe.key),localStorage.setItem(Wt,fe.url)});var Kt={async loadShows(){let e=await fetch(`${Ue()}/rpc/all_shows`,{method:"POST",headers:qe()});return e.ok?Pe(await e.text()):[]},async loadTags(){let e=await fetch(`${Ue()}/tags?id=eq.1`,{method:"GET",headers:qe()});if(!e.ok)return{};let t=JSON.stringify((await e.json())?.[0]?.data);return JSON.parse(t,(n,s)=>s instanceof Array?new Set(s):s)},saveTags(){return fetch(`${Ue()}/tags?id=eq.1`,{method:"PATCH",headers:qe(),body:JSON.stringify({data:Se()},(e,t)=>t instanceof Set?[...t]:t)})},async upsertShows(e){Pn(e)},async removeShows(e){Ln(e)}};async function Ln(e){await fetch(`${Ue()}/rpc/delete_shows`,{method:"POST",headers:qe(),body:JSON.stringify({param_ids:e})})}async function Pn(e){await fetch(`${Ue()}/rpc/upsert_show_and_episodes`,{method:"POST",headers:qe(),body:JSON.stringify({param_updates:e.map(t=>({...t,image_medium:t.image.medium,image_original:t.image.original,next_ep_id:t.nextEp?.id,prev_ep_id:t.prevEp?.id})),param_episodes:e.flatMap(t=>t.episodes.map(n=>({...n,show_id:t.id,image_medium:n.image.medium,image_original:n.image.original})))},(t,n)=>t==="episodes"||t==="image"||t==="nextEp"||t==="prevEp"?void 0:n)})}var qt="TVSM__dropboxAppName",Jt="TVSM__dropboxToken",Vt="TVSM__dropboxOauth",Xt="TVSM__dropboxSecret",Qt="TVSM__dropboxRefresh",Zt="TVSM__dropboxExpiration",ee=Z({name:localStorage.getItem(qt)||"",refresh:localStorage.getItem(Qt)||"",token:localStorage.getItem(Jt)||"",secret:localStorage.getItem(Xt)||"",expiration:new Date(localStorage.getItem(Zt)||Date.now())}),[He,yt]=j(new URL(localStorage.getItem(Vt)||"https://www.dropbox.com/oauth2/authorize?token_access_type=offline&response_type=code"));yt.byRef(e=>e.searchParams.set("redirect_uri",location.origin+location.pathname));X(()=>localStorage.setItem(Vt,He().href));X(()=>{localStorage.setItem(qt,ee.name),localStorage.setItem(Qt,ee.refresh),localStorage.setItem(Jt,ee.token),localStorage.setItem(Xt,ee.secret),localStorage.setItem(Zt,ee.expiration.toISOString())});var en={async loadShows(){return Pe(await Ut("showList.json"))},async loadTags(){return JSON.parse(await Ut("tags.json")||"{}",(e,t)=>t instanceof Array?new Set(t):t)},saveTags(){wt(JSON.stringify(Se(),(e,t)=>t instanceof Set?[...t]:t),"tags.json")},upsertShows(){wt(JSON.stringify(ie()),"showList.json")},removeShows(){wt(JSON.stringify(ie()),"showList.json")}};function tn(){let e=He().searchParams.get("client_id"),t=ee.secret;if(!e||!t)throw new Error(`Dropbox OAuth missing fields: ${e?"":"client id "}${t?"":"client secret"}`);let n=new URL("https://api.dropboxapi.com/oauth2/token");return n.searchParams.set("client_id",e),n.searchParams.set("client_secret",t),n}function nn(e){e.refresh_token&&(ee.refresh=e.refresh_token),ee.token=e.access_token,ee.expiration=new Date(Date.now()+e.expires_in*1e3)}async function sn(e){let t=tn();t.searchParams.set("grant_type","authorization_code"),t.searchParams.set("code",e),t.searchParams.set("redirect_uri",He().searchParams.get("redirect_uri"));let n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!n.ok)throw new Error(`Dropbox OAuth failed: ${n.statusText}`);nn(await n.json());let s=new URL(location.href);s.searchParams.delete("code"),location.href=s.href}async function on(){let e=tn();e.searchParams.set("grant_type","refresh_token"),e.searchParams.set("refresh_token",ee.refresh);let t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(!t.ok)throw new Error(`Dropbox OAuth refresh failed: ${t.statusText}`);nn(await t.json())}async function wt(e,t){ee.expiration.getTime()-6e4<Date.now()&&await on();let n=await fetch("https://content.dropboxapi.com/2/files/upload",{method:"POST",headers:{Authorization:`Bearer ${ee.token}`,"Dropbox-API-Arg":JSON.stringify({path:`/Apps/${ee.name}/${t}`,mode:"overwrite",autorename:!1,mute:!1}),"Content-Type":"application/octet-stream"},body:new Blob([e],{type:"application/json"})});if(!n.ok)throw new Error(`Upload failed: ${n.statusText}`)}async function Ut(e){ee.expiration.getTime()-6e4<Date.now()&&await on();let t=await fetch("https://content.dropboxapi.com/2/files/download",{method:"POST",headers:{Authorization:`Bearer ${ee.token}`,"Dropbox-API-Arg":JSON.stringify({path:`/Apps/${ee.name}/${e}`})}});if(!t.ok)throw new Error(`Download failed: ${t.statusText}`);return t.text()}function Dn(e){return e==="premiered"||e==="released"}function Pe(e){return JSON.parse(e,(t,n)=>Dn(t)&&typeof n=="string"?new Date(n):n)}var[Tt,On]=j({}),Ct="TVSM__showList",rn="TVSM__tags",Mn={async loadShows(){return Pe(localStorage.getItem(Ct)||"[]")},async loadTags(){return JSON.parse(localStorage.getItem(rn)||"{}",(e,t)=>t instanceof Array?new Set(t):t)},saveTags(){localStorage.setItem(rn,JSON.stringify(Se(),(e,t)=>t instanceof Set?[...t]:t))},upsertShows(){localStorage.setItem(Ct,JSON.stringify(ie()))},removeShows(){localStorage.setItem(Ct,JSON.stringify(ie()))}};function ln(e){let t=ie(),n=t.findIndex(o=>o.id===e.id);n!==-1?(On.byRef(o=>o[e.id]=St(t[n],e)),De.byRef(o=>o[n]=e)):De.byRef(o=>o.push(e));let s=new CustomEvent("show-update",{detail:e.id});kt.dispatchEvent(s)}var Et="browser",tt="postgrest",nt="dropbox",an="TVSM__selectedStorage",[we,cn]=j(localStorage.getItem(an)||Et),[Ie,An]=j(un());Q(we,()=>{An(un()),localStorage.setItem(an,we())});function un(){let e=we();return e===tt&&fe.url&&fe.key?Kt:e===nt&&ee.name&&ee.token?en:Mn}var[ie,De]=j([]),[Se,st]=j({});queueMicrotask(()=>{Ie().loadShows().then(De),Ie().loadTags().then(st);let e=!0;Q(Se,()=>{if(e){e=!1;return}Ie().saveTags()})});var Rn=ie();if(!Rn.length&&location.search){let e=new URL(location.href),t=e.searchParams.get("showList"),n=e.searchParams.get("code");if(t)try{De(Pe(t))}catch{console.warn("Failed to load test data")}n&&sn(n)}function he(e,t){let n=()=>(e.to?e.to instanceof Element?e.$ref=e.to:e.$ref=document.querySelector(e.to)||document.body:e.$ref=document.body,e.$ref),s=document.createComment(""),o=t.default?.();return queueMicrotask(()=>{s.addEventListener("destroy",()=>{o.forEach(Ne),s.remove()})}),X(()=>{n().append(...o)}),s}async function dn(e){if(!e)return[];let t=await xn(`/search/shows?q=${e}`);return"err"in t?[]:t.data.map(n=>fn(n.show))}async function mn(e){let t=(await Promise.all([xn(`/shows/${e}`,!0),Ht()]))[0];if(!("err"in t))return t.data&&Nn(t.data)}var In="https://api.tvmaze.com",Fn="embed[]=nextepisode&embed[]=previousepisode&embed[]=seasons&embed[]=episodes";function xn(e,t=!1){let n=new URL(`${In}${e}`);return t&&(n.search+=`${n.searchParams.size===0?"?":"&"}${Fn}`),new Promise(s=>{fetch(n).then(o=>o.json()).then(o=>s({data:o})).catch(o=>s({err:o}))})}function fn(e,t={}){return t.id=e.id,t.name=e.name,t.premiered=e.premiered?new Date(e.premiered):void 0,t.network=Yn(e),t.status=gn[e.status],t.rating=e.rating.average||void 0,t.image={medium:e.image?.medium,original:e.image?.original},t.summary=e.summary&&pt(e.summary),t}function Nn(e,t={}){return fn(e,t),t.nextEp=e._embedded.nextepisode&&Lt(e._embedded.nextepisode),t.prevEp=e._embedded.previousepisode&&Lt(e._embedded.previousepisode),t.seasons=e._embedded.seasons.length,t.episodes=e._embedded.episodes.map(Lt),t}function Yn(e){return e.network?.name||e.webChannel?.name||"N/A"}function Lt(e){return{id:e.id,name:e.name,summary:e.summary&&pt(e.summary),image:{medium:e.image?.medium,original:e.image?.original},rating:e.rating.average,number:e.number||0,season:e.season,released:new Date(e.airstamp)}}var gn={Ended:"Ended","In Development":"In Dev",Running:"Running","To Be Determined":"TBD"},$n=Object.values(gn);window._jsx$mutObserver=window._jsx$mutObserver||Te();var Hn=$('<div class="Carousel"><!></div>');window._jsx$global_event_touchmove=window._jsx$global_event_touchmove||se("touchmove");window._jsx$global_event_mousemove=window._jsx$global_event_mousemove||se("mousemove");window._jsx$global_event_mouseup=window._jsx$global_event_mouseup||se("mouseup");window._jsx$global_event_touchend=window._jsx$global_event_touchend||se("touchend");function Oe(e){let[t,n]=j([0,1]),[s,o]=j(0),[x,m]=j(0),[a,u]=j(0),_,r,i=0,c=!1,p=()=>e.itemsPerPage||1,f=0,w=0,A=()=>{let g=r.getBoundingClientRect(),y=r.previousElementSibling.getBoundingClientRect(),d,E;e.vertical?(d="y",E="height"):(d="x",E="width"),w=g[d]-y[d]-g[E]};Q(p,()=>f=(p()+1)/2),Q(()=>e.each,()=>{if(e.each.length!==t().length){let g=[...e.each.keys()];D(g),n(g)}});let b=new AbortController,k=0;Q(()=>e.page,async()=>{b.abort(),await H(e.page,k),k=e.page});function v(){Q(a,()=>_.style.setProperty("--translate",`${a()}px`)),new ResizeObserver(([y])=>{A();let d=(p()-1)*w,E=y.borderBoxSize[0].blockSize,I=y.borderBoxSize[0].inlineSize;e.vertical?(i=E+d,_.style.height=`${E*p()+d}px`,_.style.width=`${I}px`):(i=I+d,_.style.width=`${I*p()+d}px`,_.style.height=`${E}px`),u(0)}).observe(r)}async function S(){if(!c)return;c=!1;let g=4,y=Math.sign(s());for(;y<0?s()<0:s()>0;){if(c)return;let d=Math.round(s()),E=Math.abs(d);E<20?g=1:E<40?g=2:E<60&&(g=3),d<0?await C(Math.round(x())-d-g):d>0&&await C(Math.round(x())-d+g)}o(0),await P()}async function P(){let g=a();if(g<0)for(let y=g;y<=0;y+=16)await Ae(()=>u(y));else if(g>0)for(let y=g;y>=0;y-=16)await Ae(()=>u(y));await Ae(()=>u(0))}function H(g,y=e.page){let d=!0;return b=new AbortController,b.signal.addEventListener("abort",()=>d=!1),n.byRefAsync(async E=>{let I=y-g;Math.abs(I)<e.each.length/2&&(I=-I),I=-Math.sign(I);let J=I>=0?D:T;for(;d&&E[f]!==g;){for(let te=0;te<8;te++)await Ae(()=>u(te*I*r.clientWidth/8));await Ae(()=>u(0)),d&&J(E)}})}async function U(g){let y=e.vertical?-Math.sign(g.deltaY):Math.sign(g.deltaY);if(y<0){let d=ke(e.page+1,e.each);e["on:change"](d)}else if(y>0){let d=ke(e.page-1,e.each);e["on:change"](d)}}function C(g,y=!0){return Ae(()=>{let d=x()-g;o(Math.abs(d)>150?Math.sign(d)*150:d),u(a()-s()),m(g);let E=a(),I=e.vertical?0:w;if(-E>=i/2+I)n.byRef(T),u(i/2);else if(E>i/2+I)n.byRef(D),u(-i/2);else return;y&&e["on:change"](t()[f])})}function T(g){let y=g[0];for(let d=1;d<g.length;d++)g[d-1]=g[d];g[g.length-1]=y}function D(g){let y=g[g.length-1];for(let d=g.length-1;d>0;d--)g[d]=g[d-1];g[0]=y}function M(g){return e.vertical?g.pageY:g.pageX}function R(g){g.preventDefault(),c&&C(M(g.touches[0]))}function G(g){g.preventDefault(),c&&C(M(g))}function B(g){g.button===0&&S()}function q(g){c=!0,o(0),m(g)}return re(document.createComment(""),()=>{let y=Hn(),d=y.firstChild;return _=y,F(y,"vertical",()=>!!e.vertical),ce(y,"gap",()=>e.spacing),be(_jsx$mutObserver,y,!0),h(y,"mount",v),h(y,"touchstart",E=>q(M(E.touches[0]))),h(y,"mousedown",E=>E.button===0&&q(M(E))),h(y,"touchmove",E=>E.preventDefault()),h(y,"wheel",U),oe(window._jsx$global_event_touchmove,y,R),oe(window._jsx$global_event_touchend,y,S),oe(window._jsx$global_event_mousemove,y,G),oe(window._jsx$global_event_mouseup,y,B),de.$$slots={},l(d,de({get each(){return Array.from({length:p()+2})},do:(E,I)=>{let J=e.do(()=>e.each[t()[I]],()=>t()[I],I);return I===f&&(r=J),J}})),y},()=>e.$visible??!0)}var zn=$("<section><!></section>"),Gn=$('<button class="g-transparent"><!></button>'),Bn=$('<article class="DatePicker"><header class="controls"><button class="nav g-border"><i>\uF053</i></button><button class="select g-border"><span><!> <strong><!></strong></span><i>\uF077</i></button><button class="nav g-border"><i>\uF054</i></button></header><header class="week"><!></header><!><!></article>'),Wn=$('<div class="ScrollSelector"><!></div>'),Kn=$("<button><!></button>"),Un=$('<button class="g-transparent"><!></button>'),qn=$("<section><!></section>"),Jn=$("<span><!></span>"),Vn=$('<section style="grid-auto-flow:column;"><!><!></section>'),Xn=$('<section class="month"><!></section>'),Qn=$('<div class="ScrollSelector"><!></div>'),Je=["January","February","March","April","May","June","July","August","September","October","November","December"],Zn=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_n=7*6;function hn(e,t){return new Date(e,t,0).getDate()}function ot(e){let t=()=>e.date.getFullYear(),n=()=>e.date.getMonth(),[s,o]=j(!1);function x(){u(ke(n()+1,Je))}function m(){u(ke(n()-1,Je))}function a(_){_(e.date),e["on:change"](e.date)}function u(_){let r=n();e.date.setMonth(_),e.date.setDate(1),_===11&&r===0?e.date.setFullYear(t()-1):_===0&&r===11&&e.date.setFullYear(t()+1),e["on:change"](e.date)}return(()=>{let _=Bn(),r=_.firstChild,i=r.firstChild,p=i.firstChild.firstChild,f=i.nextSibling,w=f.firstChild,A=w.firstChild,v=A.nextSibling.nextSibling.firstChild,P=w.nextSibling.firstChild,H=f.nextSibling,C=H.firstChild.firstChild,T=r.nextSibling,D=T.firstChild,M=T.nextSibling,R=M.nextSibling;return h(i,"click",m),F(f,"selecting",()=>s()),h(f,"click",()=>o(!s())),l(A,()=>Je[n()]),l(v,()=>t()),h(H,"click",x),de.$$slots={},l(D,de({get each(){return Zn.map(G=>G.slice(0,2))},do:G=>(()=>{let B=Jn(),q=B.firstChild;return l(q,()=>G()),B})()})),re(M,()=>{let G=Vn(),B=G.firstChild,q=B.nextSibling;return jn.$$slots={},l(B,jn({get year(){return e.date.getFullYear()},"on:change":g=>a(y=>{y.setDate(1),y.setFullYear(g)})})),pn.$$slots={},l(q,pn({get month(){return e.date.getMonth()},"on:change":g=>a(y=>{y.setDate(1),y.setMonth(g)})})),G},()=>s()),re(R,()=>{let G=zn(),B=G.firstChild;return Oe.$$slots={},l(B,Oe({snap:!0,get vertical(){return e.vertical},spacing:"40px",get page(){return n()},"on:change":u,get each(){return Je},do:(q,g,y)=>{let d=Z({curr:0,next:0}),[E,I]=j(Array.from({length:_n})),[J,te]=j(0);Q(()=>[g(),t()],()=>{let W=g(),z=t();te(y===0&&W===11?z-1:y===2&&W===0?z+1:z)});function O(W){let z=g();d.curr=new Date(J(),z,1).getDay()||7;let ae=hn(z===0?J()-1:J(),z);for(let $e=0;$e<d.curr;$e++)W[$e]=ae-d.curr+1+$e}Q(()=>[J(),g()],()=>{let W=hn(J(),g()+1);E().length!==W&&I.byRef(z=>{O(z),d.next=d.curr+W;for(let ae=d.curr;ae<d.next;ae++)z[ae]=ae-d.curr+1;L(z)})});function L(W){for(let z=d.next;z<_n;z++)W[z]=z-d.next+1}function K(W){a(z=>{W<d.curr?z.setMonth(z.getMonth()-1):W>=d.next&&z.setMonth(z.getMonth()+1),z.setDate(E()[W])})}let V=W=>W<d.curr||W>=d.next,ne=W=>!V(W)&&e.date.getMonth()===g()&&e.date.getDate()===E()[W];return(()=>{let W=Xn(),z=W.firstChild;return N(W,"data-id",()=>g()),de.$$slots={},l(z,de({get each(){return E()},do:(ae,$e)=>(()=>{let pe=Kn(),Dt=pe.firstChild;return F(pe,"g-border",()=>!ne($e)),F(pe,"offset-days",()=>V($e)),F(pe,"weekend",()=>$e%7===0||$e%7===6),h(pe,"click",()=>K($e)),N(pe,"tabindex",()=>y===1?0:-1),l(Dt,()=>ae()),pe})()})),W})()}})),G},()=>!s()),_})()}function pn(e){return(()=>{let t=Qn(),n=t.firstChild;return Oe.$$slots={},l(n,Oe({itemsPerPage:5,vertical:!0,snap:!0,get each(){return Je},get page(){return e.month},"on:change":e["on:change"],do:(s,o,x)=>{let m=x===3;function a(){e["on:change"](o())}return(()=>{let u=Un(),_=u.firstChild;return F(u,"selected",()=>m),h(u,"click",a),l(_,()=>s()),u})()}})),t})()}function jn(e){let[t,n]=j([0,0,0]),[s,o]=j(1),[x,m]=j(2);Q(()=>e.year,()=>{n.byRef(u=>{let _=s(),r=e.year%5,i=e.year-r+2;u[_]=i,u[ke(_-1,u)]=i-5,u[ke(_+1,u)]=i+5,m(r)})});let a=!0;return Q(s,()=>{a?a=!1:(m(2),e["on:change"](t()[s()]))}),(()=>{let u=Wn(),_=u.firstChild;return Oe.$$slots={},l(_,Oe({vertical:!0,snap:!0,get each(){return t()},get page(){return s()},"on:change":o,do:r=>{let[i,c]=j(Array.from({length:5}));return Q(r,()=>{c.byRef(p=>{p.forEach((f,w)=>p[w]=r()-2+w)})}),(()=>{let p=qn(),f=p.firstChild;return de.$$slots={},l(f,de({get each(){return i()},do:(w,A)=>(()=>{let b=Gn(),k=b.firstChild;return F(b,"selected",()=>x()===A),h(b,"click",()=>e["on:change"](w())),l(k,()=>w()),b})()})),p})()}})),u})()}var es=$('<article class="DateRange"><button class="g-border"><i>\uF133</i><span><!></span></button><i>\uF061</i><button class="g-border"><span><!></span><i>\uF133</i></button><section class="preset-select"><span><!>: </span><select class="g-border"><option value="nextCentury">Next century</option><option value="next50Years">Next 50 years</option><option value="next20Years">Next 20 years</option><option value="nextDecade">Next decade</option><option value="nextYear">Next year</option><option value="next6Months">Next 6 months</option><option value="nextMonth">Next month</option><option value="nextWeek">Next week</option><option value="None" selected>None</option><option value="pastWeek">Past week</option><option value="pastMonth">Past month</option><option value="past6Months">Past 6 months</option><option value="pastYear">Past year</option><option value="pastDecade">Past decade</option><option value="past20Years">Past 20 years</option><option value="past50Years">Past 50 years</option><option value="pastCentury">Past century</option></select><!><!></section></article>'),ts=$('<section class="content"><!></section>'),ns=$('<button class="g-border"><i>\uF51A</i></button>');window._jsx$global_event_click=window._jsx$global_event_click||se("click");function Me(e){let t=Z({value:!1}),[n,s]=j(!0),[o,x]=j("None"),m=!1,a;Q(o,()=>{let r=o();if(r.startsWith("past")){let i=new Date,c=new Date(i);r==="pastWeek"?(c.setDate(i.getDate()-7),e["on:change"](c,i)):r==="pastMonth"?(c.setMonth(i.getMonth()-1),e["on:change"](c,i)):r==="past6Months"?(c.setMonth(i.getMonth()-6),e["on:change"](c,i)):r==="pastYear"?(c.setFullYear(i.getFullYear()-1),e["on:change"](c,i)):r==="pastDecade"?(c.setFullYear(i.getFullYear()-10),e["on:change"](c,i)):r==="past20Years"?(c.setFullYear(i.getFullYear()-20),e["on:change"](c,i)):r==="past50Years"?(c.setFullYear(i.getFullYear()-50),e["on:change"](c,i)):r==="pastCentury"&&(c.setFullYear(i.getFullYear()-100),e["on:change"](c,i))}else if(r.startsWith("next")){let i=new Date,c=new Date(i);r==="nextWeek"?(c.setDate(i.getDate()+7),e["on:change"](i,c)):r==="nextMonth"?(c.setMonth(i.getMonth()+1),e["on:change"](i,c)):r==="next6Months"?(c.setMonth(i.getMonth()+6),e["on:change"](i,c)):r==="nextYear"?(c.setFullYear(i.getFullYear()+1),e["on:change"](i,c)):r==="nextDecade"?(c.setFullYear(i.getFullYear()+10),e["on:change"](i,c)):r==="next20Years"?(c.setFullYear(i.getFullYear()+20),e["on:change"](i,c)):r==="next50Years"?(c.setFullYear(i.getFullYear()+50),e["on:change"](i,c)):r==="nextCentury"&&(c.setFullYear(i.getFullYear()+100),e["on:change"](i,c))}});function u(r){if(m||r.target instanceof Element&&!(r.target instanceof HTMLSelectElement)&&Ke(r.target,a)){m=!1;return}t.value=!1}function _(r){x("None"),n()?e["on:change"](r,e.end):e["on:change"](e.start,r)}return(()=>{let r=es(),i=r.firstChild,c=i.firstChild,p=c.firstChild,w=c.nextSibling.firstChild,A=i.nextSibling,b=A.firstChild,k=A.nextSibling,v=k.firstChild,S=v.firstChild,H=v.nextSibling.firstChild,C=k.nextSibling.firstChild,T=C.firstChild,D=T.nextSibling,M=C.nextSibling,R=M.firstChild,G=R.firstChild,B=R.nextSibling,q=B.firstChild,g=B.nextSibling,y=g.firstChild,d=g.nextSibling,E=d.firstChild,I=d.nextSibling,J=I.firstChild,te=I.nextSibling,O=te.firstChild,L=te.nextSibling,K=L.firstChild,V=L.nextSibling,ne=V.firstChild,W=V.nextSibling,z=W.firstChild,ae=W.nextSibling,$e=ae.firstChild,pe=ae.nextSibling,Dt=pe.firstChild,Ot=pe.nextSibling,go=Ot.firstChild,Mt=Ot.nextSibling,$o=Mt.firstChild,At=Mt.nextSibling,_o=At.firstChild,Rt=At.nextSibling,ho=Rt.firstChild,It=Rt.nextSibling,po=It.firstChild,bo=It.nextSibling.firstChild,Ft=M.nextSibling,yn=Ft.nextSibling;return F(r,"open",()=>t.value),a=r,oe(window._jsx$global_event_click,r,u),h(r,"touchstart",()=>m=!0),h(r,"mousedown",()=>m=!0),h(i,"click",()=>{t.value=!0,s(!0)}),l(w,()=>bt(e.start)),h(k,"click",()=>{t.value=!0,s(!1)}),l(S,()=>bt(e.end)),l(T,()=>e.title??"Preset"),le(M,"value",o()),h(M,"change",ve=>{ve.currentTarget.value==="None"&&e["on:change"](new Date,new Date),x(ve.currentTarget.value)}),re(Ft,()=>{let ve=ns(),vo=ve.firstChild.firstChild;return h(ve,"click",()=>{x("None"),e["on:change"](new Date,new Date)}),ve},()=>+e.start!=+e.end),Ee(yn,()=>{let ve=ts(),Nt=ve.firstChild;return ot.$$slots={},l(Nt,ot({get date(){return n()?e.start:e.end},"on:change":_})),ve},()=>t.value,"slide"),r})()}var ss=$('<button class="MultiSelect g-border"><section class="items"><!><!></section><i class="chevron">\uF077</i><!></button>'),os=$("<button data-item><!></button>"),rs=$('<article class="content"><slot></slot><section class="items"><!></section></article>'),is=$('<label><input type="checkbox"/><span><!></span></label>'),ls=$("<span><!></span>");window._jsx$global_event_click=window._jsx$global_event_click||se("click");window._jsx$global_event_touchstart=window._jsx$global_event_touchstart||se("touchstart");function ye(e){let[t,n]=j(!1),[s,o]=j(new Set),x,m;Q(()=>e.options,()=>{o.byRef(r=>{r.forEach(i=>{e.options.includes(i)||r.delete(i)})})}),Q(t,()=>e["on:expand"]?.(t())),Q(s,()=>e["on:change"](s()));function a(r){t()&&!(r.target instanceof HTMLElement&&(r.target.dataset.item!=null||Ke(r.target,x)))&&n(!1)}function u(r){m?r.target instanceof HTMLElement&&r.target.dataset.item==null&&!Ke(r.target,m)&&n(!t()):n(!0)}function _(r){return function(){o.byRef(i=>{this.checked?i.add(r):i.delete(r)})}}return(()=>{let r=ss(),i=r.firstChild,c=i.firstChild,p=c.nextSibling,f=i.nextSibling,w=f.firstChild,A=f.nextSibling;return x=r,F(r,"expanded",()=>t()),h(r,"click",u),oe(window._jsx$global_event_click,r,a),oe(window._jsx$global_event_touchstart,r,a),me.$$slots={},l(c,me({get each(){return e.options},do:b=>(()=>{let k=os(),v=k.firstChild;return h(k,"click",()=>o.byRef(S=>S.delete(b()))),F(k,"hidden",()=>!s().has(b())),l(v,()=>b()),k})()})),re(p,()=>{let b=ls(),k=b.firstChild;return l(k,()=>e.placeholder??""),b},()=>s().size===0),Ee(A,()=>{let b=rs(),k=b.firstChild,S=k.nextSibling.firstChild;return m=b,l(k,arguments[1]?.default?.()),me.$$slots={},l(S,me({get each(){return e.options},do:P=>(()=>{let H=is(),U=H.firstChild,T=U.nextSibling.firstChild;return N(U,"checked",()=>s().has(P())),h(U,"change",_(P())),l(T,()=>P()),H})()})),b},()=>t(),"slide"),r})()}var as=$('<div role="group" aria-label="Number range slider" class="NumberRange"><input type="range" aria-label="Minimum value" class="knob min"/><div class="progress"></div><input type="range" aria-label="Maximum value" class="knob max"/></div>');function ze(e){let t=()=>e.minLimit??0,n=()=>e.maxLimit??100,s=()=>e.step??1,[o,x]=j(!0),[m,a]=j(),[u,_]=j();X(()=>{e.min<t()&&e["on:min-change"](t()),e.max>n()&&e["on:max-change"](n())}),X(()=>a(r(e.min))),X(()=>_(r(e.max)));function r(f){return(f-t())*100/(n()-t())}function i(f){let b=(Re(f).clientX-this.offsetLeft)*100/this.clientWidth,k=Math.abs(b-m()),v=Math.abs(b-u());x(k<v)}function c(){let f=Number(this.value),w=e.max;f<=w?e["on:min-change"](f):(this.value=w.toString(),e["on:min-change"](w))}function p(){let f=Number(this.value),w=e.min;f>=w?e["on:max-change"](f):(this.value=w.toString(),e["on:max-change"](w))}return(()=>{let f=as(),w=f.firstChild,b=w.nextSibling.nextSibling;return ce(f,"--NumberRange-left",()=>`${m()}%`),ce(f,"--NumberRange-right",()=>`${100-u()}%`),N(f,"data-min",()=>e.formatter?e.formatter(e.min):e.min),N(f,"data-max",()=>e.formatter?e.formatter(e.max):e.max),h(f,"mousemove",i),h(f,"touchmove",i),h(f,"click",i),F(w,"focused",()=>o()),N(w,"value",()=>e.min),h(w,"input",c),h(w,"focus",()=>x(!0)),N(w,"min",()=>t()),N(w,"max",()=>n()),N(w,"step",()=>s()),F(b,"focused",()=>!o()),N(b,"value",()=>e.max),h(b,"input",p),h(b,"focus",()=>x(!1)),N(b,"min",()=>t()),N(b,"max",()=>n()),N(b,"step",()=>s()),f})()}var cs=$('<label class="Input"><i class="input-icn">\uF002</i><input class="g-delegated"/><em class="placeholder"><!></em></label>'),us=$('<label class="Filter-label"><span>Rating</span><!></label>'),ds=$('<div class="g-divider g-horizontal"></div>'),ms=$('<section class="Tag-input"><!><button class="g-border"><i>+</i></button><button class="g-border"><i>\uF068</i></button></section>'),xs=$('<strong class="title">Filters</strong>'),fs=$('<label class="Filter-label"><span>Seasons</span><!></label>');window._jsx$global_event_keydown=window._jsx$global_event_keydown||se("keydown");var[Fe,gs]=j(new Set);function it(e){let t,[n,s]=j(""),[o,x]=j([]),[m,a]=j(new Set),[u,_]=j(!1),[r,i]=j(new Set),[c,p]=j(""),[f,w]=j(new Set),[A,b]=j([new Date,new Date]),[k,v]=j([new Date,new Date]),[S,P]=j([new Date,new Date]),H=bn(O=>O.seasons,()=>e.isExpanded),[U,C]=j(0),[T,D]=j(10),M=bn(O=>O.rating||0,()=>e.isExpanded),[R,G]=j(0),[B,q]=j(10),g=H().max;Q(H,()=>{g!==H().max&&(g=H().max,D(H().max))}),Q(()=>[ie(),u(),e.isExpanded],()=>{u()&&e.isExpanded&&x([...new Set(ie().map(O=>O.network).sort())])});function y(O){O.key==="Escape"?t.blur():!Xe()&&O.key.toUpperCase()==="F"&&(O.preventDefault(),t.focus())}Ce([ie,n,m,f,r,A,k,S,U,T,R,B],te);function d(){st.byRef(O=>{for(let L of[c(),...f()])L&&(O[L]?O[L]=new Set([...O[L],...ge()]):O[L]=new Set(ge()))})}function E(){st.byRef(O=>{let L=f(),K=ge();for(let V of L){for(let ne of K)O[V].delete(ne);O[V].size||delete O[V]}})}function I(O){if(!f().size)return!0;for(let L of f())if(Se()[L]?.has(O.id))return!0;return!1}function J(O){return(!n()||O.name.includes(n()))&&(!m().size||m().has(O.network))&&(!r().size||r().has(O.status))&&I(O)&&Ze(O.premiered,...A())&&Ze(O.prevEp?.released,...k())&&Ze(O.nextEp?.released,...S())&&vt(O.seasons,U(),T())&&vt(O.rating||0,R(),B())}function te(){let O=Fe(),L=!1;ie().forEach(K=>{let V=J(K);V&&O.has(K.id)?(O.delete(K.id),L=!0):!V&&!O.has(K.id)&&(O.add(K.id),L=!0)}),L&&gs(O)}return[(rt.$$slots={},rt({get $ref(){return t},set $ref(L){t=L},get value(){return n()},"on:change":s,placeholder:"Search by name","g:onkeydown":y})),(he.$$slots={default:()=>[(()=>{let L=xs(),K=L.firstChild;return L})(),ds(),(ye.$$slots={},ye({placeholder:"Network",get options(){return o()},"on:change":a,"on:expand":_})),(ye.$$slots={},ye({placeholder:"Status",get options(){return $n},"on:change":i})),(ye.$$slots={default:()=>[(()=>{let K=ms(),V=K.firstChild,ne=V.nextSibling,z=ne.firstChild.firstChild,ae=ne.nextSibling,pe=ae.firstChild.firstChild;return rt.$$slots={},l(V,rt({get value(){return c()},"on:change":p,placeholder:"New tag"})),h(ne,"click",d),h(ae,"click",E),K})()]},ye({placeholder:"Tags",get options(){return Object.keys(Se())},"on:change":w},ye.$$slots)),(Me.$$slots={},Me({title:"Premiered",get start(){return A()[0]},get end(){return A()[1]},"on:change":(K,V)=>b([K,V])})),(Me.$$slots={},Me({title:"Prev Ep",get start(){return k()[0]},get end(){return k()[1]},"on:change":(K,V)=>v([K,V])})),(Me.$$slots={},Me({title:"Next Ep",get start(){return S()[0]},get end(){return S()[1]},"on:change":(K,V)=>P([K,V])})),(()=>{let L=fs(),K=L.firstChild,V=K.firstChild,ne=K.nextSibling;return ze.$$slots={},l(ne,ze({get min(){return U()},get max(){return T()},"on:min-change":C,"on:max-change":D,get minLimit(){return H().min},get maxLimit(){return H().max}})),L})(),(()=>{let L=us(),K=L.firstChild,V=K.firstChild,ne=K.nextSibling;return ze.$$slots={},l(ne,ze({get min(){return R()},get max(){return B()},"on:min-change":G,"on:max-change":q,formatter:W=>W.toFixed(1),step:.1,get minLimit(){return M().min},get maxLimit(){return M().max}})),L})()]},he({get to(){return e.expandedSection}},he.$$slots))]}function bn(e,t){let[n,s]=j({min:NaN,max:NaN});return Q(()=>[ie(),t()],()=>{s.byRef(o=>{let x=ie();for(let m of x){let a=e(m);(isNaN(o.min)||a<o.min)&&(o.min=a),(isNaN(o.max)||a>o.max)&&(o.max=a)}})}),n}function rt(e){return(()=>{let t=cs(),n=t.firstChild,s=n.firstChild,o=n.nextSibling,m=o.nextSibling.firstChild;return oe(window._jsx$global_event_keydown,t,e["g:onkeydown"]),e.$ref=o,le(o,"value",e.value),h(o,"input",a=>e["on:change"](a.currentTarget.value)),N(o,"placeholder",()=>e.placeholder),N(o,"disabled",()=>e.disabled),l(m,()=>e.placeholder),t})()}window._jsx$mutObserver=window._jsx$mutObserver||Te();var $s=$("<span></span>"),_s=$('<div class="Tooltip"><slot></slot></div>');window._jsx$global_event_mousemove=window._jsx$global_event_mousemove||se("mousemove");window._jsx$global_event_touchmove=window._jsx$global_event_touchmove||se("touchmove");var Ge={x:0,y:0};function vn(e){let t=Re(e);Ge.x=t.clientX,Ge.y=t.clientY}window.addEventListener("mousemove",vn);window.addEventListener("touchmove",vn);function Y(e){let[t,n]=j(Ge),s=Z({x:"1rem",y:"1rem"}),[o,x]=j(!1),[m,a]=j(!1),u,_;X(()=>{if(e.disableHover){a(e.visible||!1);return}a(o()&&(e.visible??!0))}),Ce([m],()=>{m()&&i()});function r(){let c;this.parentElement?c=this.parentElement:_?c=_:c=document.body;function p(){x(!0)}function f(){x(!1)}function w(){"ontouchstart"in window?(c.addEventListener("touchstart",p),c.addEventListener("touchend",f)):(c.addEventListener("mouseenter",p),c.addEventListener("mouseleave",f))}c.isConnected?w():c.addEventListener("mount",w,{once:!0}),c.addEventListener("unmount",()=>{x(!1),a(!1)}),this.remove()}function i(){requestAnimationFrame(()=>{let c=_.clientWidth,p=_.clientHeight,f=u.clientWidth+Ge.x+14,w=u.clientHeight+Ge.y+14;f>=c?s.x="calc(-100% - 1rem)":s.x="1rem",w>=p?s.y="calc(-100% - 1rem)":s.y="1rem",n(Ge)})}return[(he.$$slots={default:()=>[Ee(document.createComment(""),()=>{let f=_s(),w=f.firstChild;return u=f,ce(f,"--x",()=>`${t().x}px`),ce(f,"--y",()=>`${t().y}px`),ce(f,"--pos-x",()=>s.x),ce(f,"--pos-y",()=>s.y),oe(window._jsx$global_event_mousemove,f,i),oe(window._jsx$global_event_touchmove,f,i),l(w,arguments[1]?.default?.()),f},()=>m(),"pop")]},he({get $ref(){return _},set $ref(p){_=p},to:"[data-layer=tooltips]"},he.$$slots)),(()=>{let c=$s();return be(_jsx$mutObserver,c,!0),h(c,"mount",r),c})()]}function Ve([e,t],n){let s=new Set,[o,x]=j(!1),[m,a]=j(0),[u,_]=j(0);function r(){window.addEventListener("mouseup",A)}function i(){window.removeEventListener("mouseup",A)}function c(b){return function(){let k=n()[b].id;t.byRef(v=>{v.has(k)?v.delete(k):v.add(k)})}}function p(b,k){b.preventDefault(),t.byRef(v=>{v.size===n().length?v.clear():k?n().every(S=>v.has(S.id)||k.has(S.id))?v.clear():n().forEach(S=>{k.has(S.id)||v.add(S.id)}):n().forEach(S=>v.add(S.id))})}function f(b){s.clear(),e().forEach(k=>s.add(k)),a(b),x(!0)}function w(b){o()&&_(b)}function A(){s.clear(),x(!1)}return Ce([u],()=>{if(!o())return;let b=new Set(s),k=m(),v=u();k>v&&([k,v]=[v,k]);for(let S=k;S<=v;S++){let P=n()[S].id;b.has(P)?b.delete(P):b.add(P)}t(b)}),{mountSelect:r,destroySelect:i,selectIdx:c,selectAll:p,isAreaSelecting:o,startAreaSelect:f,doAreaSelect:w}}var hs=$('<div tabindex="0" class="Dialog"><header class="header"><slot name="header"></slot><button class="close-btn g-border"><i>\uF00D</i></button></header><article class="content"><slot name="content"></slot></article><slot></slot></div>');window._jsx$global_event_touchmove=window._jsx$global_event_touchmove||se("touchmove");window._jsx$global_event_mousemove=window._jsx$global_event_mousemove||se("mousemove");window._jsx$global_event_mouseup=window._jsx$global_event_mouseup||se("mouseup");window._jsx$global_event_touchend=window._jsx$global_event_touchend||se("touchend");function ue(e){let t=Z({x:e.x||0,y:e.y||0}),n=Z({x:t.x,y:t.y}),s=Z({x:t.x,y:t.y}),[o,x]=j(!1);function m(_){if(!e.draggable||(_.target instanceof HTMLButtonElement||_.target instanceof HTMLInputElement||_.preventDefault(),_ instanceof MouseEvent&&_.button!==0))return;x(!0);let r=Re(_);n.x=r.pageX,n.y=r.pageY,a(_)}function a(_){if(!o())return;let r=Re(_);t.x=s.x+r.pageX-n.x,t.y=s.y+r.pageY-n.y}function u(){x(!1),s.x=t.x,s.y=t.y}return he.$$slots={default:()=>[Ee(document.createComment(""),()=>{let i=hs(),c=i.firstChild,p=c.firstChild,f=p.nextSibling,A=f.firstChild.firstChild,b=c.nextSibling,k=b.firstChild,v=b.nextSibling;return F(i,"draggable",()=>!!e.draggable),F(i,"center",()=>!!e.center),h(i,"mousedown",S=>S.currentTarget.focus()),h(i,"touchstart",S=>S.currentTarget.focus()),oe(window._jsx$global_event_touchmove,i,a),oe(window._jsx$global_event_touchend,i,u),oe(window._jsx$global_event_mousemove,i,a),oe(window._jsx$global_event_mouseup,i,u),ce(i,"--x",()=>`${t.x}px`),ce(i,"--y",()=>`${t.y}px`),F(c,"dragging",()=>o()),h(c,"mousedown",m),h(c,"touchstart",m),l(p,arguments[1]?.header?.()),h(f,"click",()=>e.$open=!1),l(k,arguments[1]?.content?.()),l(v,arguments[1]?.default?.()),i},()=>!!e.$open,"pop")]},he({to:"[data-layer=modals]"},he.$$slots)}var ps=$('<div class="Details"><img class="img"/><strong>Summary</strong><em class="summary"><!></em><label class="season"><strong>Season</strong><select class="g-border"><!></select><em>(<!> episodes)</em></label><div class="episodes"><!></div></div>'),js=$('<section class="episode"><img/><p><strong><!></strong> <!> <em><!></em></p><em class="summary"><!></em><span class="rating"><strong><i>\uF005</i> <!></strong> <em>/ 10</em></span></section>'),bs=$("<option><!></option>"),vs=$('<p class="Details-title"><strong><!></strong> <em>(<!> episodes)</em></p>');function lt(e){let[t,n]=j(1),[s,o]=j([]),[x,m]=j([]);return X(()=>{e.$open&&o(e.show.episodes.filter(a=>a.season===t()))}),X(()=>{e.$open&&x().length!==e.show.seasons&&(m(Array.from({length:e.show.seasons})),n(1))}),ue.$$slots={header:()=>{let u=vs(),_=u.firstChild,r=_.firstChild,f=_.nextSibling.nextSibling.firstChild.nextSibling,w=f.nextSibling;return l(r,()=>e.show.name),l(f,()=>e.show.episodes.length),u},content:()=>{let u=ps(),_=u.firstChild,r=_.nextSibling,i=r.firstChild,c=r.nextSibling,p=c.firstChild,f=c.nextSibling,w=f.firstChild,A=w.firstChild,b=w.nextSibling,k=b.firstChild,P=b.nextSibling.firstChild.nextSibling,H=P.nextSibling,C=f.nextSibling.firstChild;return N(_,"src",()=>e.show.image?.original),l(p,()=>e.show.summary),N(b,"value",()=>t()),h(b,"change",T=>n(+T.currentTarget.value)),me.$$slots={},l(k,me({get each(){return x()},do:(T,D)=>(()=>{let M=bs(),R=M.firstChild;return le(M,"value",D+1),l(R,()=>D+1),M})()})),l(P,()=>s().length),me.$$slots={},l(C,me({get each(){return s()},do:T=>(()=>{let D=js(),M=D.firstChild,R=M.nextSibling,G=R.firstChild,B=G.firstChild,g=G.nextSibling.nextSibling,E=g.nextSibling.nextSibling.firstChild,I=R.nextSibling,J=I.firstChild,O=I.nextSibling.firstChild,L=O.firstChild,K=L.firstChild,ne=L.nextSibling.nextSibling,ae=O.nextSibling.nextSibling.firstChild;return N(M,"src",()=>T().image.medium),l(B,()=>Ye(T())),l(g,()=>T().name),l(E,()=>Le(T().released)),l(J,()=>T().summary),l(ne,()=>T().rating?.toFixed(1)),D})()})),u}},ue({get $open(){return e.$open},set $open(u){e.$open=u},center:!0},ue.$$slots)}window._jsx$mutObserver=window._jsx$mutObserver||Te();var Ss=$("<p>Changed from <!> to <!></p>"),ws=$("<em><!></em>"),ys=$("<li aria-disabled><!><!><!><!><!><!><!></li>"),Cs=$("<mark><!><i>\uF303</i></mark>"),Ts=$('<button class="details g-icon-btn" style="--button-bg:var(--color-ok);--button-bg-2:var(--color-ok-2);"><i>+</i></button>'),Es=$('<span class="list-cell g-horizontal"><strong><!></strong><em><!></em><!></span>'),ks=$('<button class="list-cell"><i><!></i><strong><!></strong></button>'),Ls=$("<i></i>"),Ps=$("<p>Changed from <!> to <!></p>"),Ds=$('<div class="progress-bar"><div></div><i>\uF005</i></div>'),Os=$('<span class="list-cell"><slot></slot><!></span>'),Ms=$("<mark><!><i>\uF303</i></mark>"),As=$('<button aria-hidden class="g-active-hidden"></button>'),Rs=$('<ul class="List-general List"><li class="header"><!></li><!><!></ul>'),Is=[["Name",["name"]],["Prev Ep",["prevEp","released"]],["Next Ep",["nextEp","released"]],["Network",["network"]],["Status",["status"]],["Seasons",["seasons"]],["Rating",["rating"]]],Fs=()=>ie().length.toString().length,[ge,Pt]=j(new Set);function Ns(e){return We(e,Fs())}function Ys(e,t,n,...s){return Fe().has(t.id)?1:Fe().has(n.id)?-1:Gt(jt(t,...s),jt(n,...s),e)}var kt;function ct(e){let[t,n]=j(""),{mountSelect:s,destroySelect:o,isAreaSelecting:x,selectIdx:m,selectAll:a,startAreaSelect:u,doAreaSelect:_}=Ve([ge,Pt],ie);function r(...v){let S=v.join(".");return()=>{n(t()!==S?S:`${S}-desc`)}}function i(){let v=t(),S=!v.endsWith("-desc"),P=(S?v:v.slice(0,v.length-5)).split(".");return De.byRef(H=>H.sort((U,C)=>Ys(S,U,C,...P))),S}Ce([Fe,t],i);let[c,p]=j(new Set);function f(v){p.byRef(S=>{S.add(v.detail)}),setTimeout(()=>{p.byRef(S=>{S.delete(v.detail)})},1e3)}let[w,A]=j(),b=Z({open:!1});function k(v,S){v.stopPropagation(),S===w()?b.open=!b.open:(A(S),b.open=!0)}return(()=>{let v=Rs(),S=v.firstChild,P=S.firstChild,H=S.nextSibling,U=H.nextSibling;return F(v,"expanded",()=>e.expanded),F(v,"empty",()=>ie().length===0),F(v,"is-selecting",()=>x()),kt=v,be(_jsx$mutObserver,v,!0),h(v,"mount",s),be(_jsx$mutObserver,v,!1),h(v,"unmount",o),h(v,"show-update",f),de.$$slots={},l(P,de({get each(){return Is},do:C=>{let[T,D]=C();return(()=>{let M=ks(),R=M.firstChild,G=R.firstChild,q=R.nextSibling.firstChild;return h(M,"click",r(...D)),F(R,"descending",()=>t()===`${D.join(".")}-desc`),l(G,()=>t().startsWith(D.join("."))?"\uF077":"\uF219"),l(q,()=>T),M})()}})),lt.$$slots={},l(H,lt({get $open(){return b.open},set $open(C){b.open=C},get show(){return w()}})),me.$$slots={},l(U,me({get each(){return ie()},do:(C,T)=>(()=>{let D=ys(),M=D.firstChild,R=M.nextSibling,G=R.nextSibling,B=G.nextSibling,q=B.nextSibling,g=q.nextSibling,y=g.nextSibling;return N(D,"data-status",()=>C().status),F(D,"selected",()=>ge().has(C().id)),F(D,"updated",()=>c().has(C().id)),h(D,"click",m(T)),h(D,"mousedown",d=>d.button===0&&u(T)),h(D,"mouseover",()=>_(T)),h(D,"dblclick",d=>a(d,Fe())),xe.$$slots={default:()=>[(()=>{let d=Ts(),I=d.firstChild.firstChild;return h(d,"click",J=>k(J,C())),d})(),(()=>{let d=As();return N(d,"disabled",()=>Fe().has(C().id)),d})(),()=>Ns(T+1)," ",()=>C().name]},l(M,xe({get show(){return C()},key:"name"},xe.$$slots)),at.$$slots={},l(R,at({get show(){return C()},key:"prevEp"})),at.$$slots={},l(G,at({get show(){return C()},key:"nextEp"})),xe.$$slots={default:()=>[()=>C().network]},l(B,xe({get show(){return C()},key:"network"},xe.$$slots)),xe.$$slots={default:()=>[Ls(),()=>C().status]},l(q,xe({get show(){return C()},key:"status"},xe.$$slots)),xe.$$slots={default:()=>[()=>We(C().seasons,2)]},l(g,xe({get show(){return C()},key:"seasons"},xe.$$slots)),xe.$$slots={default:()=>[re(document.createComment(""),()=>{let E=Ds(),te=E.firstChild.nextSibling.firstChild;return ce(E,"--percent",()=>`${(C().rating||0)/10*100}%`),E},()=>C().rating!=null),(()=>{let d=ws(),E=d.firstChild;return l(E,()=>et(C().rating)),d})()]},l(y,xe({get show(){return C()},key:"rating",get horizontal(){return C().rating!=null}},xe.$$slots)),D})()})),v})()}function xe(e){let t=()=>Tt()[e.show.id];return(()=>{let n=Os(),s=n.firstChild,o=s.nextSibling;return F(n,"status",()=>e.key==="status"),F(n,"g-horizontal",()=>!!e.horizontal),l(s,arguments[1]?.default?.()),re(o,()=>{let x=Cs(),m=x.firstChild,u=m.nextSibling.firstChild;return Y.$$slots={default:()=>["Changed from ",()=>t()?.a?.[e.key]," to ",()=>t()?.b?.[e.key]]},l(m,Y({},Y.$$slots)),x},()=>!!t()?.paths.includes(e.key)),n})()}function at(e){let t=()=>e.show[e.key],n=()=>Tt()[e.show.id];function s(m){return m===e.key||m.startsWith(e.key)&&(m.endsWith("number")||m.endsWith("season"))}function o(m){return m===e.key||m.startsWith(e.key)&&m.endsWith("released")}function x(m){return m.startsWith(e.key)&&(m.endsWith("season")||m.endsWith("number")||m.includes("released"))}return(()=>{let m=Es(),a=m.firstChild,u=a.firstChild,_=a.nextSibling,r=_.firstChild,i=_.nextSibling;return l(u,()=>Ye(t())),l(r,()=>Le(t()?.released)),re(i,()=>{let c=Ms(),p=c.firstChild,w=p.nextSibling.firstChild;return Y.$$slots={default:()=>[re(document.createComment(""),()=>{let b=Ps(),v=b.firstChild.nextSibling,P=v.nextSibling.nextSibling;return l(v,()=>Ye(n()?.a?.[e.key])),l(P,()=>Ye(n()?.b?.[e.key])),b},()=>!!n()?.paths.some(s)),re(document.createComment(""),()=>{let b=Ss(),v=b.firstChild.nextSibling,P=v.nextSibling.nextSibling;return l(v,()=>Le(n()?.a?.[e.key]?.released)),l(P,()=>Le(n()?.b?.[e.key]?.released)),b},()=>!!n()?.paths.some(o))]},l(p,Y({},Y.$$slots)),c},()=>!!n()?.paths.some(x)),m})()}window._jsx$mutObserver=window._jsx$mutObserver||Te();var Hs=$('<button class="g-icon-btn"><i>+</i><!></button>'),zs=$('<div class="ShowSearch-preview"><div class="img"></div><strong><!></strong><em><!></em></div>'),Gs=$('<ul class="List-general ShowSearch-results"><!><!><!></ul>'),Bs=$('<label class="ShowSearch"><i>\uF002</i><input placeholder="Search shows" spellcheck="false"/><!></label>'),Ws=$('<button style="--button-bg:var(--color-ok);--button-bg-2:var(--color-ok-2);padding-block:0.07em;">Add <strong><!></strong> show/s</button>'),Ks=$('<li class="header"><button class="list-cell"><!></button></li>'),Us=$("<strong>Add new shows <em>[/]</em></strong>"),qs=$("<li><em>No results</em></li>"),Js=$('<li><!><span class="list-cell"><button aria-hidden class="g-active-hidden"></button><!></span><span class="list-cell"><!></span><span class="list-cell"><!></span><span class="list-cell status"><i></i><!></span><span class="list-cell"><i>\uF005</i><!></span></li>');window._jsx$global_event_keydown=window._jsx$global_event_keydown||se("keydown");var Vs=["Name","Released","Network","Status","Rating"];function Xs(){let e;return location.search&&(e=new URL(location.href).searchParams.get("searchList"))?Pe(e):[]}function ut(){let e=Z({value:!1}),[t,n]=j(""),[s,o]=j(Xs()),[x,m]=j(new Set),[a,u]=j(new Set),{mountSelect:_,destroySelect:r,selectIdx:i,selectAll:c,isAreaSelecting:p,startAreaSelect:f,doAreaSelect:w}=Ve([a,u],s),A;function b(S){S.key==="Escape"?e.value=!1:!Xe()&&S.key==="/"&&(S.preventDefault(),e.value=!0,A.focus())}let k=zt(async()=>{o(await dn(t())),u.byRef(S=>S.clear()),m.byRef(S=>{S.clear(),s().forEach(P=>{ie().some(H=>P.id===H.id)&&S.add(P.id)})})},300);function v(){n(this.value),k()}return[(()=>{let S=Hs(),P=S.firstChild,H=P.firstChild,U=P.nextSibling;return h(S,"click",()=>e.value=!e.value),oe(window._jsx$global_event_keydown,S,b),Y.$$slots={default:()=>[(()=>{let C=Us(),M=C.firstChild.nextSibling.firstChild;return C})()]},l(U,Y({},Y.$$slots)),S})(),(ue.$$slots={header:()=>{let P=Bs(),H=P.firstChild,U=H.firstChild,C=H.nextSibling,T=C.nextSibling;return A=C,le(C,"value",t()),h(C,"input",v),re(T,()=>{let D=Ws(),R=D.firstChild.nextSibling,G=R.firstChild,B=R.nextSibling;return h(D,"click",()=>dt(...a())),l(G,()=>a().size),D},()=>!!a().size),P},content:()=>{let P=Gs(),H=P.firstChild,U=H.nextSibling,C=U.nextSibling;return F(P,"is-selecting",()=>p()),F(P,"empty",()=>!s().length),be(_jsx$mutObserver,P,!0),h(P,"mount",_),be(_jsx$mutObserver,P,!1),h(P,"unmount",r),de.$$slots={},l(H,de({get each(){return Vs},do:T=>(()=>{let D=Ks(),R=D.firstChild.firstChild;return l(R,()=>T()),D})()})),re(U,()=>{let T=qs(),M=T.firstChild.firstChild;return T},()=>!!t()&&!s().length),me.$$slots={},l(C,me({get each(){return s()},do:(T,D)=>(()=>{let M=Js(),R=M.firstChild,G=R.nextSibling,B=G.firstChild,q=B.nextSibling,g=G.nextSibling,y=g.firstChild,d=g.nextSibling,E=d.firstChild,I=d.nextSibling,te=I.firstChild.nextSibling,L=I.nextSibling.firstChild,K=L.firstChild,V=L.nextSibling;return N(M,"data-status",()=>T().status),F(M,"selected",()=>a().has(T().id)),h(M,"click",i(D)),h(M,"mousedown",ne=>ne.button===0&&f(D)),h(M,"mouseover",()=>w(D)),h(M,"dblclick",ne=>c(ne,x())),Y.$$slots={default:()=>[(Sn.$$slots={},Sn({get show(){return T()}}))]},l(R,Y({},Y.$$slots)),N(B,"disabled",()=>x().has(T().id)),l(q,()=>T().name),l(y,()=>Le(T().premiered)),l(E,()=>T().network),l(te,()=>T().status),l(V,()=>et(T().rating)),M})()})),P}},ue({get $open(){return e.value},set $open(P){e.value=P},center:!0},ue.$$slots))]}async function dt(...e){if(!e.length)return;let t=[];for(let n of e){let s=await mn(n);if(!s){console.warn("Show with id",n,"not found");return}ln(s),t.push(s)}Ie().upsertShows(t)}function Sn(e){return(()=>{let t=zs(),n=t.firstChild,s=n.nextSibling,o=s.firstChild,m=s.nextSibling.firstChild;return ce(n,"background-image",()=>e.show.image?.medium&&`url(${e.show.image.medium})`),l(o,()=>e.show.name),l(m,()=>e.show.summary),t})()}var Qs=$("<strong>Settings</strong>"),Zs=$('<div class="g-rows" style="gap:var(--spacing-md);"><a class="g-btn">Download queries<!></a><label class="Input"><i class="input-icn">\uF1C0</i><input placeholder="URL" class="g-delegated"/><em class="placeholder">URL</em></label><label class="Input"><i class="input-icn">\uF084</i><input placeholder="Key" class="g-delegated"/><em class="placeholder">Key</em></label></div>'),eo=$("<strong>Settings</strong>"),to=$('<button class="g-icon-btn"><i>\uF013</i><!><!></button>'),no=$("<em>You'll need to run these queries in your database</em>"),so=$('<div class="g-rows" style="gap:var(--spacing-md);"><label class="Input"><i class="input-icn">\uF07B</i><input placeholder="App name" class="g-delegated"/><em class="placeholder">App name</em></label><label class="Input"><i class="input-icn">\uF084</i><input placeholder="App secret" class="g-delegated"/><em class="placeholder">App secret</em></label><label class="Input"><i class="input-icn">\uF084</i><input placeholder="App Key" class="g-delegated"/><em class="placeholder">App Key</em></label><a class="g-btn">Connect</a></div>'),oo=$('<fieldset class="Settings"><legend>Select an storage option</legend><label class="option"><input type="radio" value="postgrest" name="storage"/><span>Postgrest</span></label><!><label class="option"><input type="radio" value="dropbox" name="storage"/><span>Dropbox</span></label><!><label class="option"><input type="radio" value="browser" name="storage"/><span>Browser</span></label></fieldset>');function mt(){let e=Z({value:!1});function t(n){n.target instanceof HTMLInputElement&&n.target.name==="storage"&&cn(n.target.value)}return(()=>{let n=to(),s=n.firstChild,o=s.firstChild,x=s.nextSibling,m=x.nextSibling;return h(n,"click",()=>e.value=!e.value),Y.$$slots={default:()=>[(()=>{let a=eo(),u=a.firstChild;return a})()]},l(x,Y({},Y.$$slots)),ue.$$slots={header:()=>{let a=Qs(),u=a.firstChild;return a},content:()=>{let a=oo(),u=a.firstChild,_=u.firstChild,r=u.nextSibling,i=r.firstChild,p=i.nextSibling.firstChild,f=r.nextSibling,w=f.nextSibling,A=w.firstChild,k=A.nextSibling.firstChild,v=w.nextSibling,P=v.nextSibling.firstChild,U=P.nextSibling.firstChild;return h(a,"change",t),le(i,"checked",we()===tt),re(f,()=>{let C=Zs(),T=C.firstChild,M=T.firstChild.nextSibling,R=T.nextSibling,G=R.firstChild,B=G.firstChild,q=G.nextSibling,y=q.nextSibling.firstChild,E=R.nextSibling.firstChild,I=E.firstChild,J=E.nextSibling,O=J.nextSibling.firstChild;return le(T,"href",location.pathname.endsWith("/")?"queries/init.sql":`${location.pathname}/queries/init.sql`),Y.$$slots={default:()=>[(()=>{let L=no(),K=L.firstChild;return L})()]},l(M,Y({},Y.$$slots)),le(q,"value",fe.url),h(q,"input",L=>fe.url=L.currentTarget.value),le(J,"value",fe.key),h(J,"input",L=>fe.key=L.currentTarget.value),C},()=>we()===tt),le(A,"checked",we()===nt),re(v,()=>{let C=so(),T=C.firstChild,D=T.firstChild,M=D.firstChild,R=D.nextSibling,B=R.nextSibling.firstChild,q=T.nextSibling,g=q.firstChild,y=g.firstChild,d=g.nextSibling,I=d.nextSibling.firstChild,J=q.nextSibling,te=J.firstChild,O=te.firstChild,L=te.nextSibling,V=L.nextSibling.firstChild,ne=J.nextSibling,W=ne.firstChild;return le(R,"value",ee.name),h(R,"input",z=>ee.name=z.currentTarget.value),le(d,"value",ee.secret),h(d,"input",z=>ee.secret=z.currentTarget.value),le(L,"value",He().searchParams.get("client_id")),h(L,"input",z=>yt.byRef(ae=>ae.searchParams.set("client_id",z.currentTarget.value))),N(ne,"href",()=>He().href),C},()=>we()===nt),le(P,"checked",we()===Et),a}},l(m,ue({get $open(){return e.value},set $open(a){e.value=a},center:!0},ue.$$slots)),n})()}var ro=$('<aside class="RightSidebar"><button class="close g-border"><i>\uF00D</i></button></aside>'),io=$("<strong>Import / Export</strong>"),lo=$(`<form class="ImportExport"><input readonly placeholder="Select shows to export"/><input placeholder="Import by id i.e '1 2 3'"/><button></button></form>`),ao=$('<header class="Header"><p class="logo">TVSM</p><div class="g-divider"></div><!><!><button class="g-icon-btn"><i>\uF56F</i><!><!></button><div class="g-divider"></div><button class="g-icon-btn" style="--button-bg:var(--color-danger);--button-bg-2:var(--color-danger-2);"><i>\uF1F8</i><!></button><button class="g-icon-btn" style="--button-bg:var(--color-ok);--button-bg-2:var(--color-ok-2);"><i>\uF0ED</i><!></button><div class="g-divider"></div><!><div class="g-divider"></div><button class="g-icon-btn"><!><i>\uF161</i></button></header>'),co=$("<strong>Import / Export</strong>");function xt(e){let[t,n]=j(),s=Z({open:!1});function o(){if(!ge().size)return;let a=[...ge()];Pt.byRef(u=>u.clear()),De.byRef(u=>{a.forEach(_=>{let r=u.findIndex(i=>i.id===_);r!==-1&&u.splice(r,1)})}),Ie().removeShows(a)}let x;async function m(a){a.preventDefault(),await dt(...x.value.split(" ").map(Number))}return[(()=>{let a=ao(),u=a.firstChild,_=u.firstChild,i=u.nextSibling.nextSibling,c=i.nextSibling,p=c.nextSibling,f=p.firstChild,w=f.firstChild,A=f.nextSibling,b=A.nextSibling,v=p.nextSibling.nextSibling,S=v.firstChild,P=S.firstChild,H=S.nextSibling,U=v.nextSibling,C=U.firstChild,T=C.firstChild,D=C.nextSibling,R=U.nextSibling.nextSibling,B=R.nextSibling.nextSibling,q=B.firstChild,y=q.nextSibling.firstChild;return F(a,"expanded",()=>e.expanded),mt.$$slots={},l(i,mt({})),ut.$$slots={},l(c,ut({})),h(p,"click",()=>s.open=!s.open),Y.$$slots={default:()=>[(()=>{let d=io(),E=d.firstChild;return d})()]},l(A,Y({},Y.$$slots)),ue.$$slots={header:()=>{let d=co(),E=d.firstChild;return d},content:()=>{let d=lo(),E=d.firstChild,I=E.nextSibling,J=I.nextSibling;return h(d,"submit",m),N(E,"value",()=>s.open?[...ge()].join(" "):""),h(E,"click",te=>te.currentTarget.select()),x=I,d}},l(b,ue({get $open(){return s.open},set $open(d){s.open=d},center:!0},ue.$$slots)),N(v,"disabled",()=>!ge().size),h(v,"click",o),Y.$$slots={default:()=>["Delete selected shows"]},l(H,Y({},Y.$$slots)),N(U,"disabled",()=>!ge().size),h(U,"click",()=>dt(...ge())),Y.$$slots={default:()=>["Update selected shows"]},l(D,Y({},Y.$$slots)),it.$$slots={},l(R,it({get expandedSection(){return t()},get isExpanded(){return e.expanded}})),h(B,"click",d=>{d.currentTarget.focus(),e["on:expand"](!e.expanded)}),Y.$$slots={default:()=>["More filtering options"]},l(q,Y({},Y.$$slots)),a})(),(()=>{let a=ro(),u=a.firstChild,r=u.firstChild.firstChild;return F(a,"expanded",()=>e.expanded),n(a),h(u,"click",()=>e["on:expand"](!1)),a})()]}var uo=$('<div data-layer="modals"></div>'),mo=$('<div data-layer="tooltips"></div>'),xo=$("<main><!><!></main>"),[wn,fo]=j(!1);document.body.append(uo(),mo());document.body.prepend((()=>{let e=xo(),t=e.firstChild,n=t.nextSibling;return xt.$$slots={},l(t,xt({get expanded(){return wn()},"on:expand":fo})),ct.$$slots={},l(n,ct({get expanded(){return wn()}})),e})());})();
//# sourceMappingURL=main.js.map
